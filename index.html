<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>YouTube Smart Open Test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <style>
    body {
      font-family: system-ui, Arial, sans-serif;
      padding: 20px;
    }

    button {
      padding: 12px 18px;
      border-radius: 8px;
      border: none;
      background: #ff0000;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      font-size: 16px;
    }

    p.note {
      color: #666;
      font-size: 0.9rem;
      margin-top: 1rem;
    }
  </style>
</head>

<body>

  <h2>Open YouTube App (Test)</h2>

  <button id="openBtn">Open in YouTube App</button>

  <p class="note">
    Works on real phones.  
    Android uses a correct intent URL to prevent Play Store redirect.
  </p>

  <script>
    const videoId = "dQw4w9WgXcQ";

    const webUrl = `https://www.youtube.com/watch?v=${videoId}`;
    const iosUrl = `youtube://watch?v=${videoId}`;

    // âœ” FIXED Android intent (no Play Store redirect)
    const androidIntent =
      `intent://www.youtube.com/watch?v=${videoId}` +
      `#Intent;package=com.google.android.youtube;` +
      `S.browser_fallback_url=${encodeURIComponent(webUrl)};end`;

    function isAndroid() {
      return /Android/i.test(navigator.userAgent);
    }

    function isIOS() {
      return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    document.getElementById("openBtn").addEventListener("click", () => {
      if (isIOS()) {
        window.location = iosUrl;
        setTimeout(() => { window.location = webUrl; }, 1500);
        return;
      }

      if (isAndroid()) {
        window.location = androidIntent;
        return;
      }

      // Desktop fallback
      window.open(webUrl, "_blank");
    });
  </script>

</body>
</html>
